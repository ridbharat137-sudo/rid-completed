const questions = [
  {
    "num": 1,
    "question_en": "Which quantity has the dimensional formula ML²T⁻²?",
    "question_hi": "किस राशि का विमीय सूत्र ML²T⁻² है?",
    "options_en": ["Energy", "Power", "Force", "Pressure"],
    "options_hi": ["ऊर्जा", "शक्ति", "बल", "दाब"],
    "answer_en": "Energy",
    "answer_hi": "ऊर्जा",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 2,
    "question_en": "The slope of velocity-time graph represents:",
    "question_hi": "वेग-समय ग्राफ का ढलान दर्शाता है:",
    "options_en": ["Displacement", "Acceleration", "Speed", "Jerk"],
    "options_hi": ["विस्थापन", "त्वरण", "चाल", "झटका"],
    "answer_en": "Acceleration",
    "answer_hi": "त्वरण",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 3,
    "question_en": "SI unit of angular momentum is:",
    "question_hi": "कोणीय संवेग का SI मात्रक है:",
    "options_en": ["kg m/s", "kg m²/s", "N m", "J s"],
    "options_hi": ["kg m/s", "kg m²/s", "N m", "J s"],
    "answer_en": "kg m²/s",
    "answer_hi": "kg m²/s",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 4,
    "question_en": "Projectile motion maximum range occurs at:",
    "question_hi": "प्रक्षेप्य गति में अधिकतम परास होती है:",
    "options_en": ["30°", "45°", "60°", "90°"],
    "options_hi": ["30°", "45°", "60°", "90°"],
    "answer_en": "45°",
    "answer_hi": "45°",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 5,
    "question_en": "The force between two masses is proportional to:",
    "question_hi": "दो द्रव्यमानों के बीच बल समानुपाती होता है:",
    "options_en": ["m1 - m2", "m1/m2", "m1 × m2", "m1 + m2"],
    "options_hi": ["m1 - m2", "m1/m2", "m1 × m2", "m1 + m2"],
    "answer_en": "m1 × m2",
    "answer_hi": "m1 × m2",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 6,
    "question_en": "Work done in uniform circular motion is:",
    "question_hi": "एकसमान वृत्तीय गति में किया गया कार्य होता है:",
    "options_en": ["Maximum", "Minimum", "Zero", "Constant"],
    "options_hi": ["अधिकतम", "न्यूनतम", "शून्य", "स्थिर"],
    "answer_en": "Zero",
    "answer_hi": "शून्य",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 7,
    "question_en": "Escape velocity depends on:",
    "question_hi": "पलायन वेग निर्भर करता है:",
    "options_en": ["Planet's mass & radius", "Atmosphere", "Temperature", "Rotation"],
    "options_hi": ["ग्रह के द्रव्यमान और त्रिज्या पर", "वायुमंडल पर", "तापमान पर", "घूर्णन पर"],
    "answer_en": "Planet's mass & radius",
    "answer_hi": "ग्रह के द्रव्यमान और त्रिज्या पर",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 8,
    "question_en": "The value of universal gravitational constant G is:",
    "question_hi": "सार्वत्रिक गुरुत्वाकर्षण नियतांक G का मान है:",
    "options_en": ["6.67 × 10⁻¹¹ N m²/kg²", "9.8 m/s²", "3 × 10⁸ m/s", "1.6 × 10⁻¹⁹ C"],
    "options_hi": ["6.67 × 10⁻¹¹ N m²/kg²", "9.8 m/s²", "3 × 10⁸ m/s", "1.6 × 10⁻¹⁹ C"],
    "answer_en": "6.67 × 10⁻¹¹ N m²/kg²",
    "answer_hi": "6.67 × 10⁻¹¹ N m²/kg²",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 9,
    "question_en": "Which is NOT a scalar quantity?",
    "question_hi": "कौन सी अदिश राशि नहीं है?",
    "options_en": ["Work", "Power", "Momentum", "Energy"],
    "options_hi": ["कार्य", "शक्ति", "संवेग", "ऊर्जा"],
    "answer_en": "Momentum",
    "answer_hi": "संवेग",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 10,
    "question_en": "A body is in equilibrium when net force is:",
    "question_hi": "एक पिंड संतुलन में होता है जब नेट बल होता है:",
    "options_en": ["Maximum", "Zero", "Minimum", "Constant"],
    "options_hi": ["अधिकतम", "शून्य", "न्यूनतम", "स्थिर"],
    "answer_en": "Zero",
    "answer_hi": "शून्य",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 11,
    "question_en": "Dimension of impulse is same as:",
    "question_hi": "संवेग की विमा समान होती है:",
    "options_en": ["Energy", "Momentum", "Power", "Velocity"],
    "options_hi": ["ऊर्जा", "संवेग", "शक्ति", "वेग"],
    "answer_en": "Momentum",
    "answer_hi": "संवेग",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 12,
    "question_en": "Young's modulus relates to:",
    "question_hi": "यंग मापांक संबंधित है:",
    "options_en": ["Shear strain", "Bulk strain", "Longitudinal strain", "Thermal strain"],
    "options_hi": ["अपरूपण विकृति", "आयतन विकृति", "अनुदैर्ध्य विकृति", "तापीय विकृति"],
    "answer_en": "Longitudinal strain",
    "answer_hi": "अनुदैर्ध्य विकृति",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 13,
    "question_en": "A streamline flow is also called:",
    "question_hi": "धारारेखीय प्रवाह कहलाता है:",
    "options_en": ["Steady flow", "Turbulent flow", "Random flow", "Rotational flow"],
    "options_hi": ["स्थिर प्रवाह", "अशांत प्रवाह", "यादृच्छिक प्रवाह", "घूर्णी प्रवाह"],
    "answer_en": "Steady flow",
    "answer_hi": "स्थिर प्रवाह",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 14,
    "question_en": "Reynolds number determines:",
    "question_hi": "रेनॉल्ड्स संख्या निर्धारित करती है:",
    "options_en": ["Viscosity", "Elasticity", "Type of flow", "Surface tension"],
    "options_hi": ["श्यानता", "प्रत्यास्थता", "प्रवाह का प्रकार", "पृष्ठ तनाव"],
    "answer_en": "Type of flow",
    "answer_hi": "प्रवाह का प्रकार",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 15,
    "question_en": "Terminal velocity occurs when:",
    "question_hi": "टर्मिनल वेग होता है जब:",
    "options_en": ["Net force = 0", "Velocity = 0", "Acceleration maximum", "Force constant"],
    "options_hi": ["नेट बल = 0", "वेग = 0", "त्वरण अधिकतम", "बल स्थिर"],
    "answer_en": "Net force = 0",
    "answer_hi": "नेट बल = 0",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 16,
    "question_en": "The ratio of specific heats Cp/Cv is:",
    "question_hi": "विशिष्ट ऊष्माओं का अनुपात Cp/Cv है:",
    "options_en": ["Pressure ratio", "Heat ratio", "Adiabatic index", "Thermal ratio"],
    "options_hi": ["दाब अनुपात", "ऊष्मा अनुपात", "रुद्धोष्म सूचकांक", "तापीय अनुपात"],
    "answer_en": "Adiabatic index",
    "answer_hi": "रुद्धोष्म सूचकांक",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 17,
    "question_en": "The speed of sound is maximum in:",
    "question_hi": "ध्वनि की चाल अधिकतम होती है:",
    "options_en": ["Air", "Water", "Iron", "Vacuum"],
    "options_hi": ["वायु में", "जल में", "लोहे में", "निर्वात में"],
    "answer_en": "Iron",
    "answer_hi": "लोहे में",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 18,
    "question_en": "Power of lens is measured in:",
    "question_hi": "लेंस की क्षमता मापी जाती है:",
    "options_en": ["Watts", "Dioptre", "Tesla", "Henry"],
    "options_hi": ["वाट", "डायोप्टर", "टेस्ला", "हेनरी"],
    "answer_en": "Dioptre",
    "answer_hi": "डायोप्टर",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 19,
    "question_en": "1 Tesla equals:",
    "question_hi": "1 टेस्ला बराबर है:",
    "options_en": ["1 Wb/m²", "1 J/C", "1 C/m²", "1 A s"],
    "options_hi": ["1 Wb/m²", "1 J/C", "1 C/m²", "1 A s"],
    "answer_en": "1 Wb/m²",
    "answer_hi": "1 Wb/m²",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 20,
    "question_en": "SI unit of electric charge is:",
    "question_hi": "विद्युत आवेश का SI मात्रक है:",
    "options_en": ["Volt", "Newton", "Coulomb", "Farad"],
    "options_hi": ["वोल्ट", "न्यूटन", "कूलम्ब", "फैरड"],
    "answer_en": "Coulomb",
    "answer_hi": "कूलम्ब",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 21,
    "question_en": "Electrostatic force is:",
    "question_hi": "विद्युत्स्थैतिक बल होता है:",
    "options_en": ["Long range", "Short range", "Contact force", "Nuclear force"],
    "options_hi": ["लंबी परास", "छोटी परास", "सम्पर्क बल", "नाभिकीय बल"],
    "answer_en": "Long range",
    "answer_hi": "लंबी परास",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 22,
    "question_en": "A good conductor has:",
    "question_hi": "एक अच्छे चालक में होती है:",
    "options_en": ["High resistivity", "Low resistivity", "Zero resistance", "High insulation"],
    "options_hi": ["उच्च प्रतिरोधकता", "निम्न प्रतिरोधकता", "शून्य प्रतिरोध", "उच्च इन्सुलेशन"],
    "answer_en": "Low resistivity",
    "answer_hi": "निम्न प्रतिरोधकता",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 23,
    "question_en": "Resistance of wire depends on:",
    "question_hi": "तार का प्रतिरोध निर्भर करता है:",
    "options_en": ["Length", "Area", "Material", "All of these"],
    "options_hi": ["लंबाई पर", "क्षेत्रफल पर", "पदार्थ पर", "इन सभी पर"],
    "answer_en": "All of these",
    "answer_hi": "इन सभी पर",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 24,
    "question_en": "Electric current is scalar because:",
    "question_hi": "विद्युत धारा अदिश है क्योंकि:",
    "options_en": ["No direction", "Direction irrelevant", "Defined by magnitude only", "It obeys scalar laws"],
    "options_hi": ["कोई दिशा नहीं", "दिशा अप्रासंगिक", "केवल परिमाण से परिभाषित", "यह अदिश नियमों का पालन करती है"],
    "answer_en": "It obeys scalar laws",
    "answer_hi": "यह अदिश नियमों का पालन करती है",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 25,
    "question_en": "Unit of capacitance:",
    "question_hi": "धारिता की इकाई:",
    "options_en": ["Henry", "Ohm", "Farad", "Coulomb"],
    "options_hi": ["हेनरी", "ओम", "फैरड", "कूलम्ब"],
    "answer_en": "Farad",
    "answer_hi": "फैरड",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 26,
    "question_en": "A galvanometer measures:",
    "question_hi": "गैल्वेनोमीटर मापता है:",
    "options_en": ["Voltage", "Resistance", "Small current", "Large current"],
    "options_hi": ["वोल्टेज", "प्रतिरोध", "छोटी धारा", "बड़ी धारा"],
    "answer_en": "Small current",
    "answer_hi": "छोटी धारा",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 27,
    "question_en": "Magnetic field inside a long solenoid is:",
    "question_hi": "एक लंबी परिनालिका के अंदर चुंबकीय क्षेत्र होता है:",
    "options_en": ["Zero", "Non-uniform", "Uniform", "Irregular"],
    "options_hi": ["शून्य", "असमान", "समान", "अनियमित"],
    "answer_en": "Uniform",
    "answer_hi": "समान",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 28,
    "question_en": "Transformer works on:",
    "question_hi": "ट्रांसफॉर्मर कार्य करता है:",
    "options_en": ["DC only", "AC only", "Battery", "Static charge"],
    "options_hi": ["केवल DC", "केवल AC", "बैटरी", "स्थिर आवेश"],
    "answer_en": "AC only",
    "answer_hi": "केवल AC",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 29,
    "question_en": "Lenz's law is based on:",
    "question_hi": "लेंज का नियम आधारित है:",
    "options_en": ["Conservation of mass", "Conservation of energy", "Conservation of momentum", "Conservation of charge"],
    "options_hi": ["द्रव्यमान संरक्षण", "ऊर्जा संरक्षण", "संवेग संरक्षण", "आवेश संरक्षण"],
    "answer_en": "Conservation of energy",
    "answer_hi": "ऊर्जा संरक्षण",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 30,
    "question_en": "Einstein's photoelectric equation relates:",
    "question_hi": "आइंस्टीन का प्रकाशविद्युत समीकरण संबंधित करता है:",
    "options_en": ["Charge & mass", "Energy & frequency", "Voltage & resistance", "Current & time"],
    "options_hi": ["आवेश और द्रव्यमान", "ऊर्जा और आवृत्ति", "वोल्टेज और प्रतिरोध", "धारा और समय"],
    "answer_en": "Energy & frequency",
    "answer_hi": "ऊर्जा और आवृत्ति",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 31,
    "question_en": "Critical angle occurs during:",
    "question_hi": "क्रांतिक कोण होता है:",
    "options_en": ["Reflection", "Refraction", "Total internal reflection", "Scattering"],
    "options_hi": ["परावर्तन", "अपवर्तन", "पूर्ण आंतरिक परावर्तन", "प्रकीर्णन"],
    "answer_en": "Total internal reflection",
    "answer_hi": "पूर्ण आंतरिक परावर्तन",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 32,
    "question_en": "SI unit of frequency:",
    "question_hi": "आवृत्ति का SI मात्रक:",
    "options_en": ["Hertz", "Dioptre", "Coulomb", "Weber"],
    "options_hi": ["हर्ट्ज", "डायोप्टर", "कूलम्ब", "वेबर"],
    "answer_en": "Hertz",
    "answer_hi": "हर्ट्ज",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 33,
    "question_en": "De Broglie wavelength is inversely proportional to:",
    "question_hi": "डी ब्रॉग्ली तरंगदैर्ध्य व्युत्क्रमानुपाती होती है:",
    "options_en": ["Energy", "Mass", "Momentum", "Frequency"],
    "options_hi": ["ऊर्जा", "द्रव्यमान", "संवेग", "आवृत्ति"],
    "answer_en": "Momentum",
    "answer_hi": "संवेग",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 34,
    "question_en": "A semiconductor has:",
    "question_hi": "एक अर्धचालक में होता है:",
    "options_en": ["Zero gap", "Large band gap", "Small band gap", "Infinite gap"],
    "options_hi": ["शून्य अंतराल", "बड़ा बैंड अंतराल", "छोटा बैंड अंतराल", "अनंत अंतराल"],
    "answer_en": "Small band gap",
    "answer_hi": "छोटा बैंड अंतराल",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 35,
    "question_en": "Output of NOT gate is:",
    "question_hi": "NOT गेट का आउटपुट होता है:",
    "options_en": ["Same", "Opposite", "Double", "Halved"],
    "options_hi": ["समान", "विपरीत", "दोगुना", "आधा"],
    "answer_en": "Opposite",
    "answer_hi": "विपरीत",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 36,
    "question_en": "Half-life depends on:",
    "question_hi": "अर्ध-आयु निर्भर करती है:",
    "options_en": ["Temperature", "Pressure", "Nature of isotope", "Mass"],
    "options_hi": ["तापमान पर", "दाब पर", "आइसोटोप की प्रकृति पर", "द्रव्यमान पर"],
    "answer_en": "Nature of isotope",
    "answer_hi": "आइसोटोप की प्रकृति पर",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 37,
    "question_en": "SI unit of activity (radioactivity):",
    "question_hi": "सक्रियता (रेडियोधर्मिता) का SI मात्रक:",
    "options_en": ["Gray", "Becquerel", "Curie", "Tesla"],
    "options_hi": ["ग्रे", "बेकरेल", "क्यूरी", "टेस्ला"],
    "answer_en": "Becquerel",
    "answer_hi": "बेकरेल",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 38,
    "question_en": "Binding energy per nucleon is maximum for:",
    "question_hi": "प्रति न्यूक्लियॉन बंधन ऊर्जा अधिकतम होती है:",
    "options_en": ["Uranium", "Iron", "Helium", "Hydrogen"],
    "options_hi": ["यूरेनियम", "आयरन", "हीलियम", "हाइड्रोजन"],
    "answer_en": "Iron",
    "answer_hi": "आयरन",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 39,
    "question_en": "Charge of neutron is:",
    "question_hi": "न्यूट्रॉन का आवेश होता है:",
    "options_en": ["Positive", "Negative", "Zero", "Variable"],
    "options_hi": ["धनात्मक", "ऋणात्मक", "शून्य", "परिवर्तनशील"],
    "answer_en": "Zero",
    "answer_hi": "शून्य",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 40,
    "question_en": "Beta particle is:",
    "question_hi": "बीटा कण होता है:",
    "options_en": ["Electron", "Proton", "Neutron", "Photon"],
    "options_hi": ["इलेक्ट्रॉन", "प्रोटॉन", "न्यूट्रॉन", "फोटॉन"],
    "answer_en": "Electron",
    "answer_hi": "इलेक्ट्रॉन",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 41,
    "question_en": "The color of light with maximum energy:",
    "question_hi": "अधिकतम ऊर्जा वाले प्रकाश का रंग:",
    "options_en": ["Red", "Green", "Blue", "Violet"],
    "options_hi": ["लाल", "हरा", "नीला", "बैंगनी"],
    "answer_en": "Violet",
    "answer_hi": "बैंगनी",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 42,
    "question_en": "Quality factor is used in:",
    "question_hi": "गुणता कारक उपयोग किया जाता है:",
    "options_en": ["Resistors", "Inductors", "Capacitors", "Oscillators"],
    "options_hi": ["प्रतिरोधकों में", "प्रेरकों में", "संधारित्रों में", "दोलकों में"],
    "answer_en": "Oscillators",
    "answer_hi": "दोलकों में",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 43,
    "question_en": "Velocity of EM waves is:",
    "question_hi": "विद्युत चुम्बकीय तरंगों का वेग है:",
    "options_en": ["3×10⁸ m/s", "3×10⁶ m/s", "3×10⁵ m/s", "3×10³ m/s"],
    "options_hi": ["3×10⁸ मी/से", "3×10⁶ मी/से", "3×10⁵ मी/से", "3×10³ मी/से"],
    "answer_en": "3×10⁸ m/s",
    "answer_hi": "3×10⁸ मी/से",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 44,
    "question_en": "Hall effect is used for measuring:",
    "question_hi": "हॉल प्रभाव उपयोग किया जाता है मापने के लिए:",
    "options_en": ["Power", "Voltage", "Magnetic field", "Resistance"],
    "options_hi": ["शक्ति", "वोल्टेज", "चुंबकीय क्षेत्र", "प्रतिरोध"],
    "answer_en": "Magnetic field",
    "answer_hi": "चुंबकीय क्षेत्र",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 45,
    "question_en": "Bohr's orbit radius is proportional to:",
    "question_hi": "बोहर कक्षा की त्रिज्या समानुपाती होती है:",
    "options_en": ["n", "n²", "1/n", "1/n²"],
    "options_hi": ["n", "n²", "1/n", "1/n²"],
    "answer_en": "n²",
    "answer_hi": "n²",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 46,
    "question_en": "Nuclear force is:",
    "question_hi": "नाभिकीय बल होता है:",
    "options_en": ["Short range", "Long range", "Weak", "Gravitational"],
    "options_hi": ["छोटी परास", "लंबी परास", "कमजोर", "गुरुत्वाकर्षण"],
    "answer_en": "Short range",
    "answer_hi": "छोटी परास",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 47,
    "question_en": "Which wave cannot travel in vacuum?",
    "question_hi": "कौन सी तरंग निर्वात में यात्रा नहीं कर सकती?",
    "options_en": ["Sound waves", "Light waves", "Radio waves", "X-rays"],
    "options_hi": ["ध्वनि तरंगें", "प्रकाश तरंगें", "रेडियो तरंगें", "एक्स-किरणें"],
    "answer_en": "Sound waves",
    "answer_hi": "ध्वनि तरंगें",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 48,
    "question_en": "Unit of magnetic flux:",
    "question_hi": "चुंबकीय फ्लक्स की इकाई:",
    "options_en": ["Tesla", "Henry", "Weber", "Joule"],
    "options_hi": ["टेस्ला", "हेनरी", "वेबर", "जूल"],
    "answer_en": "Weber",
    "answer_hi": "वेबर",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 49,
    "question_en": "The dimensional formula of pressure:",
    "question_hi": "दाब का विमीय सूत्र:",
    "options_en": ["MLT⁻²", "ML⁻¹T⁻²", "M⁻¹L²T", "ML²T⁻²"],
    "options_hi": ["MLT⁻²", "ML⁻¹T⁻²", "M⁻¹L²T", "ML²T⁻²"],
    "answer_en": "ML⁻¹T⁻²",
    "answer_hi": "ML⁻¹T⁻²",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 50,
    "question_en": "If frequency doubles, wavelength becomes:",
    "question_hi": "यदि आवृत्ति दोगुनी हो जाए, तो तरंगदैर्ध्य हो जाती है:",
    "options_en": ["Double", "Half", "Same", "Zero"],
    "options_hi": ["दोगुनी", "आधी", "समान", "शून्य"],
    "answer_en": "Half",
    "answer_hi": "आधी",
    "attempted": false,
    "selected": ""
  }
];


let currentQuestion = 0;
let language = "en";
let timeLeft = 60 * 60; 
let timerInterval;

// ----------------- Load Question -----------------
function loadQuestion(index) {
    const q = questions[index];
    if (!q) return; //  undefined error fix
   questions[index].visited = true;
    document.getElementById("question").textContent =
       `${q.num}. ${language === "en" ? q.question_en : q.question_hi}`;

    document.getElementById("questionCounter").textContent =
       ` Question ${index + 1} of ${questions.length}`;

    const optionsElement = document.getElementById("options");
    optionsElement.innerHTML = "";

    const options = language === "en" ? q.options_en : q.options_hi;

    options.forEach(option => {
        const isSelected = q.selected === option;

        const div = document.createElement("div");
        div.className = "option-box";

        div.style = `
            border: 2px solid ${isSelected ? "#007bff" : "#ccc"};
            background-color: ${isSelected ? "#e7f1ff" : "white"};
            padding: 10px;
            border-radius: 8px;
            margin: 6px 0;
            cursor: pointer;
        `;

        div.innerHTML = `
            <input type="radio" name="option" value="${option}" 
            ${isSelected ? "checked" : ""} style="margin-right:8px;">
            ${option}
        `;

        div.addEventListener("click", () => {
            markAttempted(index, option);
            loadQuestion(index);
        });

        optionsElement.appendChild(div);
    });

    updateNavigation();
}

// ----------------- Attempt Mark -----------------
function markAttempted(index, selectedAnswer) {
    questions[index].attempted = true;
    questions[index].selected = selectedAnswer;
    updateNavigation();
}

// ----------------- Next / Previous -----------------
function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion(currentQuestion);
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion(currentQuestion);
    }
}

function changeLanguage() {
    language = document.getElementById("languageSelect").value;
    loadQuestion(currentQuestion);
}

// ----------------- Final Submit -----------------
function submitQuiz() {
    let confirmation = confirm("Are you sure you want to submit the test?");
    if (!confirmation) return;

    let attempted = 0;
    let notAttempted = 0;
    let score = 0;
    const results = [];

    questions.forEach(q => {
        if (q.attempted) {
            attempted++;

            if (q.selected === q.answer_en || q.selected === q.answer_hi) {
                score++;
            }
        } else {
            notAttempted++;
        }

        results.push({
            question: language === "en" ? q.question_en : q.question_hi,
            selected: q.selected || "Not Answered",
            correct: language === "en" ? q.answer_en : q.answer_hi
        });
    });

    localStorage.setItem("attempted", attempted);
    localStorage.setItem("notAttempted", notAttempted);
    localStorage.setItem("score", score);
    localStorage.setItem("results", JSON.stringify(results));

    let viewResult = confirm("Test submitted! Do you want to view result?");
    if (viewResult) {
        window.location.href = "/RTS/public/Deshbord/category/test/submit-test.html";
    }
}

// ----------------- Navigation Circles -----------------
function updateNavigation() {
    const nav = document.getElementById("circleContainer");
    nav.innerHTML = "";

    questions.forEach((q, i) => {
        let color = "gray"; // default: not visited

        if (i === currentQuestion) {
            color = "blue"; // current question
        } 
        else if (q.attempted) {
            color = "green"; // answered
        } 
        else if (q.visited) {
            color = "white"; // visited but not answered
        }

        nav.innerHTML += `
            <div class="circle" style="background:${color}; border:1px solid black;"
            onclick="jumpToQuestion(${i})">${i + 1}</div>
        `;
    });
}

function jumpToQuestion(index) {
    currentQuestion = index;
    loadQuestion(index);
}

// ----------------- Timer -----------------
function startTimer() {
    const timerElement = document.getElementById("timer");

    timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert("Time's up!");
            submitQuiz();
        } else {
            const hours = String(Math.floor(timeLeft / 3600)).padStart(2, "0");
            const minutes = String(Math.floor((timeLeft % 3600) / 60)).padStart(2, "0");
            const seconds = String(timeLeft % 60).padStart(2, "0");

            timerElement.textContent = `Time Left: ${hours}:${minutes}:${seconds}`;
            timeLeft--;
        }
    }, 1000);
}

// ----------------- Camera & Movement Detection -----------------
let videoStream;
let movementCount = 0;

function startCamera() {
    const container = document.createElement("div");
    container.id = "camera-container";
    container.style = `
        position:fixed; top:10px; left:10px; width:130px; height:130px;
        border-radius:50%; overflow:hidden; border:3px solid red; z-index:9999;
    `;

    document.body.appendChild(container);

    const video = document.createElement("video");
    video.autoplay = true;
    video.playsinline = true;
    video.style = "width:100%; height:100%; object-fit:cover;";
    container.appendChild(video);

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            videoStream = stream;
            detectMovement(video);
        })
        .catch(() => alert("Camera access denied!"));
}

function detectMovement(video) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 160;
    canvas.height = 160;

    let lastData = null;

    setInterval(() => {
        ctx.drawImage(video, 0, 0, 160, 160);
        const data = ctx.getImageData(0, 0, 160, 160);

        if (lastData) {
            let diff = 0;
            for (let i = 0; i < data.data.length; i += 4) {
                diff += Math.abs(data.data[i] - lastData.data[i]);
            }

            if (diff > 1000000) {
                movementCount++;

                if (movementCount === 1) alert("⚠ Alert 1: No movement detected!");
                if (movementCount === 2) alert("⚠ Alert 2: Head not moving!");
                if (movementCount === 3) {
                    alert("⚠ Alert 3: Restarting test...");
                    restartTest();
                }
            }
        }
        lastData = data;

    }, 2000);
}

function restartTest() {
    if (videoStream) videoStream.getTracks().forEach(t => t.stop());

    const cam = document.getElementById("camera-container");
    if (cam) cam.remove();

    movementCount = 0;
    currentQuestion = 0;
    timeLeft = 60 * 60;

    questions.forEach(q => {
        q.attempted = false;
        q.selected = null;
    });

    loadQuestion(0);
    startTimer();
    startCamera();
}

// ----------------- Page Load -----------------
window.onload = function () {
    loadQuestion(currentQuestion);
    startTimer();
    startCamera();
};