<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile | TestSeries Pro</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ===== RESET & BASE STYLES ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      color: #333;
    }

    /* ===== UTILITY CLASSES ===== */
    .btn-primary {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-primary:hover {
      background: #2980b9;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
    }

    .btn-secondary {
      background: #95a5a6;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-secondary:hover {
      background: #7f8c8d;
    }

    /* ===== NAVIGATION BAR ===== */
    .navbar {
      background: white;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      max-width: 1400px;
      margin: 0 auto;
      height: 70px;
    }

    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: #2c3e50;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .logo i {
      font-size: 2rem;
      margin-right: 10px;
      color: #3498db;
    }

    .nav-center {
      display: flex;
      gap: 30px;
    }

    .nav-center a {
      text-decoration: none;
      color: #34495e;
      font-weight: 500;
      padding: 8px 15px;
      border-radius: 20px;
      transition: all 0.3s ease;
    }

    .nav-center a:hover {
      background: #3498db;
      color: white;
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .notification-icon {
      position: relative;
      cursor: pointer;
      font-size: 1.2rem;
      color: #7f8c8d;
    }

    .notification-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #e74c3c;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .user-dropdown {
      position: relative;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      padding: 5px 15px;
      border-radius: 25px;
      transition: background 0.3s ease;
    }

    .user-dropdown:hover {
      background: #f8f9fa;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #3498db;
    }

    .user-name {
      font-weight: 600;
      color: #2c3e50;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border-radius: 10px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
      min-width: 200px;
      display: none;
      z-index: 1000;
    }

    .user-dropdown:hover .dropdown-menu {
      display: block;
    }

    .dropdown-menu a {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      text-decoration: none;
      color: #2c3e50;
      transition: background 0.3s ease;
    }

    .dropdown-menu a:hover {
      background: #f8f9fa;
    }

    .dropdown-menu i {
      margin-right: 10px;
      width: 20px;
    }

    .dropdown-divider {
      border-top: 1px solid #eee;
      margin: 5px 0;
    }

    .logout {
      color: #e74c3c !important;
    }

    /* ===== MAIN PROFILE CONTAINER ===== */
    .profile-container {
      display: flex;
      max-width: 1400px;
      margin: 30px auto;
      padding: 0 20px;
      gap: 30px;
    }

    /* ===== SIDEBAR ===== */
    .profile-sidebar {
      flex: 0 0 320px;
    }

    .user-card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .avatar-container {
      position: relative;
      width: 120px;
      height: 120px;
      margin: 0 auto 20px;
    }

    .profile-avatar {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #3498db;
    }

    .edit-avatar-btn {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #3498db;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
    }

    .edit-avatar-btn:hover {
      transform: scale(1.1);
    }

    .user-card h2 {
      color: #2c3e50;
      margin-bottom: 5px;
      font-size: 1.5rem;
    }

    .user-title {
      color: #7f8c8d;
      margin-bottom: 15px;
      font-size: 0.9rem;
    }

    .user-rating {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 5px;
      margin-bottom: 15px;
    }

    .user-rating i {
      color: #f1c40f;
    }

    .user-rating span {
      color: #2c3e50;
      font-weight: 600;
      margin-left: 5px;
    }

    .member-since {
      color: #95a5a6;
      font-size: 0.9rem;
      margin-bottom: 20px;
    }

    .member-since i {
      margin-right: 5px;
    }

    .quick-stats {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      padding: 15px 0;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #3498db;
    }

    .stat-label {
      font-size: 0.8rem;
      color: #7f8c8d;
      margin-top: 5px;
    }

    .btn-edit-profile {
      width: 100%;
      padding: 12px;
      font-size: 1rem;
      font-weight: 600;
    }

    .sidebar-menu {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }

    .menu-item {
      display: flex;
      align-items: center;
      padding: 15px 25px;
      text-decoration: none;
      color: #2c3e50;
      border-left: 4px solid transparent;
      transition: all 0.3s ease;
    }

    .menu-item:hover {
      background: #f8f9fa;
      color: #3498db;
    }

    .menu-item.active {
      background: #e3f2fd;
      color: #3498db;
      border-left-color: #3498db;
    }

    .menu-item i {
      margin-right: 10px;
      width: 20px;
    }

    /* ===== MAIN CONTENT ===== */
    .profile-content {
      flex: 1;
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 2px solid #eee;
    }

    .content-header h1 {
      color: #2c3e50;
      font-size: 1.8rem;
    }

    .btn-share {
      background: #2ecc71;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.3s ease;
    }

    .btn-share:hover {
      background: #27ae60;
    }

    /* ===== INFO CARDS ===== */
    .info-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
    }

    .info-card h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .info-card h3 i {
      color: #3498db;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }

    .info-item {
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
    }

    .info-item label {
      display: block;
      color: #7f8c8d;
      font-size: 0.9rem;
      margin-bottom: 5px;
    }

    .info-item p {
      color: #2c3e50;
      font-weight: 500;
    }

    /* ===== EDUCATION ===== */
    .education-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .education-item {
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      border-left: 4px solid #3498db;
    }

    .education-item h4 {
      color: #2c3e50;
      margin-bottom: 5px;
    }

    .institution {
      color: #3498db;
      font-weight: 500;
      margin-bottom: 5px;
    }

    .duration {
      color: #7f8c8d;
      font-size: 0.9rem;
    }

    /* ===== EXAM TAGS ===== */
    .exam-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }

    .exam-tag {
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .exam-tag.primary {
      background: #3498db;
      color: white;
    }

    .exam-tag.secondary {
      background: #9b59b6;
      color: white;
    }

    .exam-tag.success {
      background: #2ecc71;
      color: white;
    }

    .exam-tag.warning {
      background: #f39c12;
      color: white;
    }

    /* ===== PROGRESS BARS ===== */
    .progress-item {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 15px;
    }

    .progress-item label {
      flex: 0 0 150px;
      color: #2c3e50;
      font-weight: 500;
    }

    .progress-bar {
      flex: 1;
      height: 10px;
      background: #ecf0f1;
      border-radius: 5px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #3498db, #2ecc71);
      border-radius: 5px;
      transition: width 1s ease;
    }

    .progress-item span {
      flex: 0 0 50px;
      text-align: right;
      color: #3498db;
      font-weight: 600;
    }

    /* ===== ACTIVITY LIST ===== */
    .activity-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .activity-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      transition: transform 0.3s ease;
    }

    .activity-item:hover {
      transform: translateX(5px);
    }

    .activity-item i {
      font-size: 1.2rem;
    }

    .activity-item i.success {
      color: #2ecc71;
    }

    .activity-item i.warning {
      color: #f39c12;
    }

    .activity-item i.info {
      color: #3498db;
    }

    .activity-content {
      flex: 1;
    }

    .activity-content p {
      color: #2c3e50;
      font-weight: 500;
      margin-bottom: 5px;
    }

    .activity-time {
      color: #7f8c8d;
      font-size: 0.8rem;
    }

    .score-badge {
      background: #3498db;
      color: white;
      padding: 5px 10px;
      border-radius: 15px;
      font-weight: 600;
    }

    /* ===== PERFORMANCE TAB ===== */
    .time-filter select {
      padding: 8px 15px;
      border-radius: 20px;
      border: 1px solid #ddd;
      background: white;
      font-family: 'Poppins', sans-serif;
    }

    .chart-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .chart-card {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
    }

    .chart-card h4 {
      color: #2c3e50;
      margin-bottom: 15px;
    }

    .mock-chart {
      height: 200px;
      display: flex;
      align-items: flex-end;
      gap: 10px;
      padding: 20px 0;
    }

    .chart-line {
      flex: 1;
      background: linear-gradient(to top, #3498db, #2ecc71);
      border-radius: 5px 5px 0 0;
      min-height: 20px;
    }

    .subject-performance {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .subject-item {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .subject-item span:first-child {
      flex: 0 0 150px;
      color: #2c3e50;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-card i {
      font-size: 2.5rem;
      color: #3498db;
      margin-bottom: 15px;
    }

    .stat-card h3 {
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .stat-card p {
      color: #7f8c8d;
      font-size: 1.5rem;
      font-weight: 700;
    }

    /* ===== ACHIEVEMENTS TAB ===== */
    .badge-count {
      background: #3498db;
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: 600;
    }

    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .achievement-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      border: 3px solid transparent;
    }

    .achievement-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    .achievement-card.gold {
      border-color: #f1c40f;
      background: linear-gradient(135deg, #fef9e7, #f7dc6f);
    }

    .achievement-card.silver {
      border-color: #bdc3c7;
      background: linear-gradient(135deg, #f8f9f9, #d5dbdb);
    }

    .achievement-card.bronze {
      border-color: #e67e22;
      background: linear-gradient(135deg, #fef5e7, #f0b27a);
    }

    .achievement-card.locked {
      opacity: 0.6;
      filter: grayscale(0.5);
    }

    .achievement-card i {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    .achievement-card.gold i {
      color: #f1c40f;
    }

    .achievement-card.silver i {
      color: #bdc3c7;
    }

    .achievement-card.bronze i {
      color: #e67e22;
    }

    .achievement-card h4 {
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .achievement-card p {
      color: #7f8c8d;
      font-size: 0.9rem;
    }

    .section-title {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 1.3rem;
    }

    /* ===== MODAL ===== */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 30px;
      border-bottom: 1px solid #eee;
    }

    .modal-header h2 {
      color: #2c3e50;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 1.8rem;
      color: #7f8c8d;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .close-btn:hover {
      color: #e74c3c;
    }

    .modal-body {
      padding: 30px;
    }

    .modal-footer {
      padding: 20px 30px;
      border-top: 1px solid #eee;
      display: flex;
      justify-content: flex-end;
      gap: 15px;
    }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 1200px) {
      .profile-container {
        flex-direction: column;
      }

      .profile-sidebar {
        flex: none;
        width: 100%;
      }
    }

    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        height: auto;
        padding: 15px;
      }

      .nav-center {
        margin: 15px 0;
        flex-wrap: wrap;
        justify-content: center;
      }

      .nav-right {
        width: 100%;
        justify-content: center;
      }

      .content-header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }

      .chart-container {
        grid-template-columns: 1fr;
      }

      .achievements-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
    }

    @media (max-width: 480px) {
      .quick-stats {
        flex-direction: column;
        gap: 15px;
      }

      .exam-tags {
        justify-content: center;
      }

      .progress-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }

      .progress-item label {
        flex: none;
      }

      .modal-content {
        width: 95%;
        margin: 10px;
      }
    }
     /* Add these styles to your existing CSS */
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: #333;
  }
  
  .form-input {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 16px;
    font-family: 'Poppins', sans-serif;
    transition: border 0.3s;
  }
  
  .form-input:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
  }
  
  .form-input:invalid {
    border-color: #e74c3c;
  }
  
  textarea.form-input {
    min-height: 100px;
    resize: vertical;
  }
  </style>
</head>

<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-left">
        <a href="dashboard.html" class="logo">
          <i class="fas fa-graduation-cap"></i>
          <span>TestSeries Pro</span>
        </a>
      </div>
      <div class="nav-center">
        <a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a>
        <a href="tests.html"><i class="fas fa-file-alt"></i> Tests</a>
        <a href="leaderboard.html"><i class="fas fa-trophy"></i> Leaderboard</a>
        <a href="analytics.html"><i class="fas fa-chart-line"></i> Analytics</a>
      </div>
      <div class="nav-right">
        <div class="notification-icon">
          <i class="fas fa-bell"></i>
          <span class="notification-count">3</span>
        </div>
        <div class="user-dropdown">
          <img src="https://i.pravatar.cc/150?img=1" alt="User" class="user-avatar">
          <span class="user-name">Rahul Sharma</span>
          <i class="fas fa-chevron-down"></i>
          <div class="dropdown-menu">
            <a href="#" onclick="showTab('overview')"><i class="fas fa-user"></i> My Profile</a>
            <a href="#" onclick="showTab('settings')"><i class="fas fa-cog"></i> Settings</a>
            <a href="#" onclick="showTab('tests')"><i class="fas fa-history"></i> Test History</a>
            <a href="#"><i class="fas fa-question-circle"></i> Help</a>
            <div class="dropdown-divider"></div>
            <a href="#" class="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Profile Container -->
  <div class="profile-container">
    <!-- Sidebar -->
    <aside class="profile-sidebar">
      <div class="user-card">
        <div class="avatar-container">
          <img src="https://i.pravatar.cc/150?img=1" alt="Rahul Sharma" class="profile-avatar" id="profileAvatar">
          <button class="edit-avatar-btn" onclick="openAvatarUpload()">
            <i class="fas fa-camera"></i>
          </button>
        </div>
        <h2 class="user-name" id="userName">Rahul Sharma</h2>
        <p class="user-title" id="userTitle">UPSC Aspirant</p>
        <div class="user-rating">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star-half-alt"></i>
          <span>4.2</span>
        </div>
        <p class="member-since">
          <i class="far fa-calendar-alt"></i>
          Member since Jan 2024
        </p>

        <div class="quick-stats">
          <div class="stat-item">
            <div class="stat-value">15</div>
            <div class="stat-label">Tests Taken</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">78%</div>
            <div class="stat-label">Avg. Score</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">7</div>
            <div class="stat-label">Day Streak</div>
          </div>
        </div>

        <button class="btn-primary btn-edit-profile" onclick="openEditProfile()">
          <i class="fas fa-edit"></i> Edit Profile
        </button>
      </div>

      <div class="sidebar-menu">
        <a href="#" class="menu-item active" onclick="showTab('overview')">
          <i class="fas fa-user-circle"></i> Overview
        </a>
        <a href="#" class="menu-item" onclick="showTab('activity')">
          <i class="fas fa-history"></i> Activity
        </a>
        <a href="#" class="menu-item" onclick="showTab('performance')">
          <i class="fas fa-chart-line"></i> Performance
        </a>
        <a href="#" class="menu-item" onclick="showTab('achievements')">
          <i class="fas fa-trophy"></i> Achievements
        </a>
        <a href="#" class="menu-item" onclick="showTab('tests')">
          <i class="fas fa-file-alt"></i> My Tests
        </a>
        <a href="#" class="menu-item" onclick="showTab('settings')">
          <i class="fas fa-cog"></i> Settings
        </a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="profile-content">
      <!-- Overview Tab -->
      <section id="overview" class="tab-content active">
        <div class="content-header">
          <h1>Profile Overview</h1>
          <button class="btn-share" onclick="shareProfile()">
            <i class="fas fa-share-alt"></i> Share Profile
          </button>
        </div>

        <!-- Personal Information -->
        <div class="info-card">
          <h3><i class="fas fa-info-circle"></i> Personal Information</h3>
          <div class="info-grid">
            <div class="info-item">
              <label>Full Name</label>
              <p id="infoFullName">Rahul Sharma</p>
            </div>
            <div class="info-item">
              <label>Email</label>
              <p id="infoEmail">rahul.sharma@example.com</p>
            </div>
            <div class="info-item">
              <label>Phone</label>
              <p id="infoPhone">+91 98765 43210</p>
            </div>
            <div class="info-item">
              <label>Date of Birth</label>
              <p id="infoDOB">15 March 1998</p>
            </div>
            <div class="info-item">
              <label>Location</label>
              <p id="infoLocation">New Delhi, India</p>
            </div>
            <div class="info-item">
              <label>Gender</label>
              <p id="infoGender">Male</p>
            </div>
          </div>
        </div>

        <!-- Academic Information -->
        <div class="info-card">
          <h3><i class="fas fa-graduation-cap"></i> Academic Information</h3>
          <div class="education-list">
            <div class="education-item">
              <h4>Bachelor of Technology - Computer Science</h4>
              <p class="institution">Indian Institute of Technology, Delhi</p>
              <p class="duration">2016 - 2020 | CGPA: 8.5/10</p>
            </div>
            <div class="education-item">
              <h4>Senior Secondary (XII)</h4>
              <p class="institution">Delhi Public School, RK Puram</p>
              <p class="duration">2015 - 2016 | Percentage: 94.2%</p>
            </div>
          </div>
        </div>

        <!-- Exam Targets -->
        <div class="info-card">
          <h3><i class="fas fa-bullseye"></i> Exam Targets</h3>
          <div class="exam-tags">
            <span class="exam-tag primary">UPSC CSE 2024</span>
            <span class="exam-tag secondary">SSC CGL</span>
            <span class="exam-tag success">Current Affairs</span>
            <span class="exam-tag warning">Quantitative Aptitude</span>
          </div>
          <div class="exam-progress">
            <div class="progress-item">
              <label>UPSC Preparation</label>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 65%"></div>
              </div>
              <span>65%</span>
            </div>
            <div class="progress-item">
              <label>General Studies</label>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 80%"></div>
              </div>
              <span>80%</span>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="info-card">
          <h3><i class="fas fa-history"></i> Recent Activity</h3>
          <div class="activity-list">
            <div class="activity-item">
              <i class="fas fa-check-circle success"></i>
              <div class="activity-content">
                <p>Completed "UPSC Prelims Mock Test 5"</p>
                <span class="activity-time">2 hours ago</span>
              </div>
              <span class="score-badge">82%</span>
            </div>
            <div class="activity-item">
              <i class="fas fa-medal warning"></i>
              <div class="activity-content">
                <p>Achieved "Speed Master" badge</p>
                <span class="activity-time">Yesterday</span>
              </div>
            </div>
            <div class="activity-item">
              <i class="fas fa-chart-line info"></i>
              <div class="activity-content">
                <p>Improved accuracy by 15% in Quantitative Aptitude</p>
                <span class="activity-time">2 days ago</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Performance Tab -->
      <section id="performance" class="tab-content">
        <div class="content-header">
          <h1>Performance Analytics</h1>
          <div class="time-filter">
            <select id="timeFilter" onchange="updateChart()">
              <option>Last 7 Days</option>
              <option>Last 30 Days</option>
              <option>Last 3 Months</option>
              <option>All Time</option>
            </select>
          </div>
        </div>

        <!-- Performance Charts -->
        <div class="chart-container">
          <div class="chart-card">
            <h4>Score Trend</h4>
            <div class="chart-placeholder">
              <div class="mock-chart" id="scoreChart">
                <div class="chart-line" style="height: 70%"></div>
                <div class="chart-line" style="height: 85%"></div>
                <div class="chart-line" style="height: 65%"></div>
                <div class="chart-line" style="height: 90%"></div>
                <div class="chart-line" style="height: 75%"></div>
              </div>
            </div>
          </div>

          <div class="chart-card">
            <h4>Subject-wise Performance</h4>
            <div class="subject-performance">
              <div class="subject-item">
                <span>General Studies</span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 85%"></div>
                </div>
                <span>85%</span>
              </div>
              <div class="subject-item">
                <span>Quantitative Aptitude</span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 70%"></div>
                </div>
                <span>70%</span>
              </div>
              <div class="subject-item">
                <span>English</span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 90%"></div>
                </div>
                <span>90%</span>
              </div>
              <div class="subject-item">
                <span>Reasoning</span>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 65%"></div>
                </div>
                <span>65%</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Test Statistics -->
        <div class="stats-grid">
          <div class="stat-card">
            <i class="fas fa-tachometer-alt"></i>
            <h3>Average Speed</h3>
            <p>45 seconds/question</p>
          </div>
          <div class="stat-card">
            <i class="fas fa-check-circle"></i>
            <h3>Accuracy Rate</h3>
            <p>78.5%</p>
          </div>
          <div class="stat-card">
            <i class="fas fa-clock"></i>
            <h3>Total Time Spent</h3>
            <p>45 hours</p>
          </div>
          <div class="stat-card">
            <i class="fas fa-chart-bar"></i>
            <h3>Rank Improvement</h3>
            <p>+150 positions</p>
          </div>
        </div>
      </section>

      <!-- Achievements Tab -->
      <section id="achievements" class="tab-content">
        <div class="content-header">
          <h1>Achievements & Badges</h1>
          <span class="badge-count">12 Badges Earned</span>
        </div>

        <div class="achievements-grid">
          <div class="achievement-card gold">
            <i class="fas fa-crown"></i>
            <h4>Top Performer</h4>
            <p>Ranked in top 10%</p>
          </div>
          <div class="achievement-card silver">
            <i class="fas fa-bolt"></i>
            <h4>Speed Master</h4>
            <p>Completed test in record time</p>
          </div>
          <div class="achievement-card bronze">
            <i class="fas fa-fire"></i>
            <h4>7-Day Streak</h4>
            <p>Consistent practice</p>
          </div>
          <div class="achievement-card">
            <i class="fas fa-brain"></i>
            <h4>Accuracy Pro</h4>
            <p>90%+ accuracy in 5 tests</p>
          </div>
          <div class="achievement-card">
            <i class="fas fa-book"></i>
            <h4>Quick Learner</h4>
            <p>Completed 50 chapters</p>
          </div>
          <div class="achievement-card">
            <i class="fas fa-users"></i>
            <h4>Community Helper</h4>
            <p>Answered 100+ doubts</p>
          </div>
        </div>

        <!-- Locked Achievements -->
        <h3 class="section-title">Next Challenges</h3>
        <div class="achievements-grid">
          <div class="achievement-card locked">
            <i class="fas fa-trophy"></i>
            <h4>Perfect Score</h4>
            <p>Score 100% in any test</p>
          </div>
          <div class="achievement-card locked">
            <i class="fas fa-calendar"></i>
            <h4>30-Day Streak</h4>
            <p>Practice for 30 consecutive days</p>
          </div>
        </div>
      </section>

      <!-- Settings Tab -->
      <section id="settings" class="tab-content">
        <div class="content-header">
          <h1>Account Settings</h1>
        </div>

        <div class="info-card">
          <h3><i class="fas fa-user-cog"></i> Profile Settings</h3>
          <div class="settings-form">
            <div class="form-group">
              <label>Display Name</label>
              <input type="text" id="displayName" value="Rahul Sharma" class="form-input">
            </div>
            <div class="form-group">
              <label>Email Address</label>
              <input type="email" id="displayEmail" value="rahul.sharma@example.com" class="form-input">
            </div>
            <div class="form-group">
              <label>Profile Title</label>
              <input type="text" id="profileTitle" value="UPSC Aspirant" class="form-input">
            </div>
            <button class="btn-primary" onclick="saveProfileSettings()">
              <i class="fas fa-save"></i> Save Changes
            </button>
          </div>
        </div>

        <div class="info-card">
          <h3><i class="fas fa-bell"></i> Notification Preferences</h3>
          <div class="settings-list">
            <div class="setting-item">
              <span>Email Notifications</span>
              <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <span>Test Reminders</span>
              <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <span>Result Alerts</span>
              <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <span>Weekly Reports</span>
              <label class="toggle-switch">
                <input type="checkbox">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="info-card">
          <h3><i class="fas fa-shield-alt"></i> Security</h3>
          <button class="btn-secondary" onclick="changePassword()">
            <i class="fas fa-key"></i> Change Password
          </button>
        </div>
      </section>
    </main>
  </div>

  <!-- Edit Profile Modal -->
  <!-- Edit Profile Modal -->
<div id="editProfileModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Edit Profile</h2>
      <button type="button" class="close-btn" onclick="closeEditProfile()">&times;</button>
    </div>
    <form id="editProfileForm">
      <div class="modal-body">
        <div class="form-group">
          <label>Full Name *</label>
          <input type="text" id="editFullName" required class="form-input">
        </div>
        <div class="form-group">
          <label>Profile Title</label>
          <input type="text" id="editTitle" class="form-input" placeholder="e.g., UPSC Aspirant">
        </div>
        <div class="form-group">
          <label>Email *</label>
          <input type="email" id="editEmail" required class="form-input">
        </div>
        <div class="form-group">
          <label>Phone Number</label>
          <input type="tel" id="editPhone" class="form-input" placeholder="e.g., 9876543210">
        </div>
        <div class="form-group">
          <label>Bio/Introduction</label>
          <textarea id="editBio" rows="3" class="form-input"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-secondary" onclick="closeEditProfile()">Cancel</button>
        <button type="submit" class="btn-primary">Save Changes</button>
      </div>
    </form>
  </div>
</div>

  <!-- Avatar Upload Modal -->
  <div id="avatarModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Change Profile Picture</h2>
        <button class="close-btn" onclick="closeAvatarUpload()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="avatar-upload-area" id="dropArea">
          <i class="fas fa-cloud-upload-alt"></i>
          <p>Drag & drop your photo here</p>
          <p class="upload-note">or</p>
          <button type="button" class="btn-secondary" onclick="document.getElementById('fileInput').click()">
            Choose File
          </button>
          <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleFileSelect(event)">
        </div>
        <div class="avatar-preview" id="avatarPreview" style="display: none;">
          <img id="previewImage" src="" alt="Preview">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-secondary" onclick="closeAvatarUpload()">Cancel</button>
        <button type="button" class="btn-primary" id="uploadBtn" onclick="uploadAvatar()" disabled>
          <i class="fas fa-upload"></i> Upload Photo
        </button>
      </div>
    </div>
  </div>
<!-- Existing HTML code... -->

<script>
// ===== GLOBAL VARIABLES =====
const API = "http://localhost:9191/api";
let userId = localStorage.getItem("userId");

// ===== AUTHENTICATION CHECK =====
if (!userId) {
  console.error("No userId found in localStorage");
  alert("Please login first!");
  window.location.href = "/RTS/public/Authentication/login.html";
} else {
  console.log("User ID from localStorage:", userId);
}

// ===== LOAD PROFILE DATA =====
async function loadProfile() {
  try {
    console.log("Fetching profile data for userId:", userId);
    
    const response = await fetch(`${API}/profile/${userId}`, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json'
      }
    });
    
    console.log("Response status:", response.status);
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const data = await response.json();
    console.log("Profile API Response:", data);
    
    if (data.success && data.user) {
      updateUIWithUserData(data.user);
      
      // Also update localStorage with latest data
      localStorage.setItem("userName", data.user.fullName);
      localStorage.setItem("userEmail", data.user.email);
      localStorage.setItem("userPhone", data.user.phoneNumber || "");
      localStorage.setItem("userTitle", data.user.title || "Student");
      
    } else {
      throw new Error(data.message || "Failed to load profile data");
    }
    
  } catch (error) {
    console.error("Error loading profile:", error);
    
    // Try to show data from localStorage as fallback
    const fallbackUser = {
      fullName: localStorage.getItem("userName") || "User",
      email: localStorage.getItem("userEmail") || "",
      phoneNumber: localStorage.getItem("userPhone") || "",
      title: localStorage.getItem("userTitle") || "Student",
      createdAt: new Date()
    };
    
    updateUIWithUserData(fallbackUser);
    showNotification("Could not fetch latest data. Showing cached data.", "warning");
  }
}

// ===== UPDATE UI WITH USER DATA =====
function updateUIWithUserData(user) {
  console.log("Updating UI with:", user);
  
  try {
    // üîπ NAVBAR UPDATE
    const userNameElements = document.querySelectorAll('.user-name');
    userNameElements.forEach(el => {
      if (el) el.textContent = user.fullName;
    });
    
    // Update avatar in navbar
    const navAvatar = document.querySelector('.user-avatar');
    if (navAvatar) {
      // You can set avatar image or initial
      const initial = user.fullName ? user.fullName.charAt(0).toUpperCase() : 'U';
      navAvatar.textContent = initial;
    }
    
    // üîπ SIDEBAR UPDATE
    const sidebarName = document.getElementById("userName");
    const sidebarTitle = document.getElementById("userTitle");
    if (sidebarName) sidebarName.textContent = user.fullName;
    if (sidebarTitle) sidebarTitle.textContent = user.title || "Student";
    
    // üîπ OVERVIEW TAB UPDATE
    const infoFullName = document.getElementById("infoFullName");
    const infoEmail = document.getElementById("infoEmail");
    const infoPhone = document.getElementById("infoPhone");
    
    if (infoFullName) infoFullName.textContent = user.fullName;
    if (infoEmail) infoEmail.textContent = user.email;
    if (infoPhone) infoPhone.textContent = user.phoneNumber || "Not provided";
    
    // üîπ MEMBER SINCE
    const memberSince = document.querySelector(".member-since");
    if (memberSince && user.createdAt) {
      const joinDate = new Date(user.createdAt);
      const options = { year: 'numeric', month: 'long' };
      const formattedDate = joinDate.toLocaleDateString('en-IN', options);
      memberSince.innerHTML = `<i class="far fa-calendar-alt"></i> Member since ${formattedDate}`;
    }
    
    // üîπ EDIT MODAL FIELDS
    const editFullName = document.getElementById("editFullName");
    const editEmail = document.getElementById("editEmail");
    const editPhone = document.getElementById("editPhone");
    const editTitle = document.getElementById("editTitle");
    
    if (editFullName) editFullName.value = user.fullName;
    if (editEmail) editEmail.value = user.email;
    if (editPhone) editPhone.value = user.phoneNumber || "";
    if (editTitle) editTitle.value = user.title || "";
    
    // üîπ SETTINGS TAB FIELDS
    const displayName = document.getElementById("displayName");
    const displayEmail = document.getElementById("displayEmail");
    const profileTitle = document.getElementById("profileTitle");
    
    if (displayName) displayName.value = user.fullName;
    if (displayEmail) displayEmail.value = user.email;
    if (profileTitle) profileTitle.value = user.title || "";
    
  } catch (error) {
    console.error("Error updating UI:", error);
  }
}

// ===== UPDATE PROFILE (DATABASE SYNC) =====
// ===== UPDATE PROFILE FUNCTION =====
async function saveProfileChanges(e) {
  e.preventDefault();
  console.log("üíæ Saving profile changes...");
  
  const fullName = document.getElementById('editFullName').value.trim();
  const email = document.getElementById('editEmail').value.trim();
  const phoneNumber = document.getElementById('editPhone').value.trim();
  const title = document.getElementById('editTitle').value.trim();
  
  console.log("Form Data:", { fullName, email, phoneNumber, title });
  
  // Basic validation
  if (!fullName) {
    showNotification('Full name is required', 'error');
    return;
  }
  
  if (!email) {
    showNotification('Email is required', 'error');
    return;
  }
  
  // Email format validation
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    showNotification('Please enter a valid email address', 'error');
    return;
  }
  
  try {
    console.log("üåê Sending update request to server...");
    
    const response = await fetch(`${API}/profile/${userId}`, {
      method: "PUT",
      headers: { 
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ 
        fullName, 
        email, 
        phoneNumber,
        title 
      })
    });
    
    console.log("üì• Server Response Status:", response.status);
    console.log("üì• Server Response Headers:", response.headers);
    
    const data = await response.json();
    console.log("üì• Server Response Data:", data);
    
    if (!response.ok) {
      // Handle HTTP errors
      console.error("HTTP Error:", response.status, data);
      throw new Error(data.message || `HTTP ${response.status} error`);
    }
    
    if (data.success) {
      console.log("‚úÖ Profile update successful");
      
      // Update localStorage
      localStorage.setItem("userName", fullName);
      localStorage.setItem("userEmail", email);
      if (phoneNumber) localStorage.setItem("userPhone", phoneNumber);
      if (title) localStorage.setItem("userTitle", title);
      
      // Update UI with new data
      if (data.user) {
        updateUIWithUserData(data.user);
      }
      
      closeEditProfile();
      showNotification('Profile updated successfully!', 'success');
      
      // Reload profile data to sync with server
      setTimeout(() => {
        loadProfile();
      }, 1000);
      
    } else {
      console.error("‚ùå Server returned error:", data.message);
      showNotification(data.message || 'Update failed', 'error');
    }
    
  } catch (err) {
    console.error("‚ùå Update error:", err);
    console.error("Error details:", err.stack);
    
    let errorMessage = 'Server error. Please try again.';
    
    if (err.message.includes('Failed to fetch')) {
      errorMessage = 'Network error. Please check your internet connection.';
    } else if (err.message.includes('404')) {
      errorMessage = 'User not found. Please login again.';
    } else if (err.message.includes('409')) {
      errorMessage = 'Email or phone number already exists.';
    } else if (err.message.includes('400')) {
      errorMessage = 'Invalid data. Please check your input.';
    }
    
    showNotification(errorMessage, 'error');
  }
}

// ===== LOGOUT FUNCTION =====
function logout() {
  console.log("Logging out...");
  localStorage.clear();
  window.location.href = "/RTS/public/Authentication/login.html";
}

// ===== NOTIFICATION FUNCTION =====
function showNotification(message, type) {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.innerHTML = `
    <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
    <span>${message}</span>
    <button onclick="this.parentElement.remove()">&times;</button>
  `;
  
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${type === 'success' ? '#2ecc71' : type === 'error' ? '#e74c3c' : '#f39c12'};
    color: white;
    padding: 15px 20px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 3000;
    animation: slideIn 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  `;
  
  document.body.appendChild(notification);
  
  setTimeout(() => {
    if (notification.parentElement) {
      notification.remove();
    }
  }, 3000);
}

// ===== INITIALIZATION =====
document.addEventListener('DOMContentLoaded', function() {
  console.log("Profile page loaded");
  
  // Load profile data
  loadProfile();
  
  // Setup logout button
  const logoutBtn = document.querySelector('.logout');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', function(e) {
      e.preventDefault();
      logout();
    });
  }
  
  // Debug: Check what's in localStorage
  console.log("LocalStorage check:");
  console.log("userId:", localStorage.getItem("userId"));
  console.log("userName:", localStorage.getItem("userName"));
  console.log("userEmail:", localStorage.getItem("userEmail"));
});

// ===== EXISTING FUNCTIONS (‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç) =====
function showTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
  document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  document.querySelector(`a[onclick*="${tabId}"]`).classList.add('active');
}

function openEditProfile() {
  document.getElementById('editProfileModal').classList.add('active');
}

function closeEditProfile() {
  document.getElementById('editProfileModal').classList.remove('active');
}

function openAvatarUpload() {
  document.getElementById('avatarModal').classList.add('active');
}

function closeAvatarUpload() {
  document.getElementById('avatarModal').classList.remove('active');
}

// Add CSS for animations
const style = document.createElement('style');
style.textContent = `
  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
`;
document.head.appendChild(style);
// ===== SAVE PROFILE SETTINGS =====
async function saveProfileSettings() {
  const displayName = document.getElementById('displayName').value.trim();
  const email = document.getElementById('displayEmail').value.trim();
  const profileTitle = document.getElementById('profileTitle').value.trim();
  
  console.log("üíæ Saving profile settings:", { displayName, email, profileTitle });
  
  if (!displayName) {
    showNotification('Display name is required', 'error');
    return;
  }
  
  if (!email) {
    showNotification('Email is required', 'error');
    return;
  }
  
  // Email format validation
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    showNotification('Please enter a valid email address', 'error');
    return;
  }
  
  try {
    const response = await fetch(`${API}/profile/${userId}`, {
      method: "PUT",
      headers: { 
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ 
        fullName: displayName, 
        email, 
        title: profileTitle 
      })
    });
    
    console.log("Settings update response:", response.status);
    const data = await response.json();
    console.log("Settings update data:", data);
    
    if (data.success) {
      // Update localStorage
      localStorage.setItem("userName", displayName);
      localStorage.setItem("userEmail", email);
      localStorage.setItem("userTitle", profileTitle);
      
      // Update UI
      if (data.user) {
        updateUIWithUserData(data.user);
      }
      
      showNotification('Settings saved successfully!', 'success');
    } else {
      showNotification(data.message || 'Save failed', 'error');
    }
    
  } catch (err) {
    console.error("Save settings error:", err);
    showNotification('Server error. Please try again.', 'error');
  }
}

// ===== FORM SUBMIT HANDLER =====
document.addEventListener('DOMContentLoaded', function() {
  console.log("Profile page loaded");
  
  // Load profile data
  loadProfile();
  
  // Setup logout button
  const logoutBtn = document.querySelector('.logout');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', function(e) {
      e.preventDefault();
      logout();
    });
  }
  
  // Setup edit profile form submit
  const editProfileForm = document.getElementById('editProfileForm');
  if (editProfileForm) {
    editProfileForm.addEventListener('submit', function(e) {
      console.log("Form submitted via submit event");
      saveProfileChanges(e);
    });
  } else {
    console.error("Edit profile form not found!");
  }
  
  // Setup settings save button
  const saveSettingsBtn = document.querySelector('[onclick="saveProfileSettings()"]');
  if (saveSettingsBtn) {
    // Remove old onclick and add new event listener
    saveSettingsBtn.removeAttribute('onclick');
    saveSettingsBtn.addEventListener('click', function(e) {
      e.preventDefault();
      saveProfileSettings();
    });
  }
  
  // Debug: Check what's in localStorage
  console.log("LocalStorage check:");
  console.log("userId:", localStorage.getItem("userId"));
  console.log("userName:", localStorage.getItem("userName"));
  console.log("userEmail:", localStorage.getItem("userEmail"));
});
</script>
</body>

</html>