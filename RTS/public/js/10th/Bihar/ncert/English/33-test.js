const questions = [
  {
    "num": 1,
    "question_en": "What is the subject of the poem 'Koel (The Black Cuckoo)'?",
    "options_en": ["A common sparrow", "A black cuckoo bird", "A colorful parrot", "A nightingale"],
    "answer_en": "A black cuckoo bird",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 2,
    "question_en": "What is the English name for the bird 'Koel'?",
    "options_en": ["Asian koel", "European cuckoo", "Blackbird", "Crow pheasant"],
    "answer_en": "Asian koel",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 3,
    "question_en": "What is distinctive about the koel's call?",
    "options_en": ["Loud, repetitive 'ko-el'", "Soft chirping", "Harsh cawing", "Musical trills"],
    "answer_en": "Loud, repetitive 'ko-el'",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 4,
    "question_en": "During which season is the koel most vocal?",
    "options_en": ["Winter", "Summer", "Spring", "Monsoon"],
    "answer_en": "Spring",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 5,
    "question_en": "What is the koel's breeding behavior?",
    "options_en": ["Builds its own nest", "Brood parasite", "Nest in ground", "No nest needed"],
    "answer_en": "Brood parasite",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 6,
    "question_en": "Which birds' nests does koel commonly use?",
    "options_en": ["Crow nests", "Sparrow nests", "Eagle nests", "Own nests"],
    "answer_en": "Crow nests",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 7,
    "question_en": "What is the male koel's color?",
    "options_en": ["Glossy black", "Brown with spots", "Green and yellow", "Blue and red"],
    "answer_en": "Glossy black",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 8,
    "question_en": "What is the female koel's appearance?",
    "options_en": ["Brown with spots", "Glossy black", "All white", "Red and black"],
    "answer_en": "Brown with spots",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 9,
    "question_en": "What does the koel symbolize in Indian poetry?",
    "options_en": ["Messenger of spring", "Symbol of death", "Sign of rain", "Warning of danger"],
    "answer_en": "Messenger of spring",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 10,
    "question_en": "What time of day is koel most active?",
    "options_en": ["Early morning", "Midday", "Late afternoon", "All day"],
    "answer_en": "Early morning",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 11,
    "question_en": "What is the koel's scientific name?",
    "options_en": ["Eudynamys scolopaceus", "Corvus splendens", "Passer domesticus", "Cuculus canorus"],
    "answer_en": "Eudynamys scolopaceus",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 12,
    "question_en": "What family does koel belong to?",
    "options_en": ["Cuckoo family", "Crow family", "Sparrow family", "Parrot family"],
    "answer_en": "Cuckoo family",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 13,
    "question_en": "What is unique about koel's eggs?",
    "options_en": ["Resemble host's eggs", "Bright blue", "Very large", "Square shaped"],
    "answer_en": "Resemble host's eggs",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 14,
    "question_en": "How does koel's call affect listeners?",
    "options_en": ["Evokes longing", "Causes fear", "Induces sleep", "No effect"],
    "answer_en": "Evokes longing",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 15,
    "question_en": "What does koel's arrival signify?",
    "options_en": ["Changing seasons", "Approaching storm", "Drought coming", "Harvest time"],
    "answer_en": "Changing seasons",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 16,
    "question_en": "What is koel's call often compared to?",
    "options_en": ["Musical notes", "Human voice", "Other birds", "Instrument sounds"],
    "answer_en": "Human voice",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 17,
    "question_en": "Where is koel commonly found?",
    "options_en": ["Indian subcontinent", "Europe only", "Africa only", "Australia only"],
    "answer_en": "Indian subcontinent",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 18,
    "question_en": "What is koel's diet mainly?",
    "options_en": ["Fruits and insects", "Small mammals", "Fish only", "Grains only"],
    "answer_en": "Fruits and insects",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 19,
    "question_en": "How does koel benefit gardens?",
    "options_en": ["Eats pests", "Pollinates flowers", "Spreads seeds", "All of these"],
    "answer_en": "Eats pests",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 20,
    "question_en": "What emotion does koel's call evoke in poetry?",
    "options_en": ["Yearning and separation", "Joy and celebration", "Anger and frustration", "Peace and calm"],
    "answer_en": "Yearning and separation",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 21,
    "question_en": "What is the Hindi name for this bird?",
    "options_en": ["Koel", "Bulbul", "Maina", "Tota"],
    "answer_en": "Koel",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 22,
    "question_en": "When does koel migrate?",
    "options_en": ["Summer visitor", "Winter visitor", "Resident all year", "No migration"],
    "answer_en": "Summer visitor",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 23,
    "question_en": "What tree is koel often associated with?",
    "options_en": ["Mango tree", "Banyan tree", "Neem tree", "Pine tree"],
    "answer_en": "Mango tree",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 24,
    "question_en": "How does koel raise its young?",
    "options_en": ["Host birds raise them", "Raises them itself", "Abandons them", "Community raising"],
    "answer_en": "Host birds raise them",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 25,
    "question_en": "What is special about koel's eyes?",
    "options_en": ["Red iris", "Blue iris", "Green iris", "Brown iris"],
    "answer_en": "Red iris",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 26,
    "question_en": "What sound does koel make?",
    "options_en": ["Ku-oo, ku-oo", "Chirp chirp", "Caw caw", "Tweet tweet"],
    "answer_en": "Ku-oo, ku-oo",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 27,
    "question_en": "What is koel's size compared to?",
    "options_en": ["Pigeon-sized", "Sparrow-sized", "Eagle-sized", "Hummingbird-sized"],
    "answer_en": "Pigeon-sized",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 28,
    "question_en": "What is koel's tail like?",
    "options_en": ["Long and graduated", "Short and stubby", "Forked like swallow", "No tail"],
    "answer_en": "Long and graduated",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 29,
    "question_en": "What is the peak calling period?",
    "options_en": ["Breeding season", "Winter months", "Rainy season", "All year"],
    "answer_en": "Breeding season",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 30,
    "question_en": "How does koel affect host birds?",
    "options_en": ["Lays eggs in their nests", "Steals their food", "Competes for mates", "No effect"],
    "answer_en": "Lays eggs in their nests",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 31,
    "question_en": "What is the poetic significance of koel?",
    "options_en": ["Symbol of love", "Symbol of war", "Symbol of wealth", "Symbol of death"],
    "answer_en": "Symbol of love",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 32,
    "question_en": "What habitat does koel prefer?",
    "options_en": ["Woodlands and gardens", "Deserts", "High mountains", "Urban centers"],
    "answer_en": "Woodlands and gardens",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 33,
    "question_en": "What is koel's flight pattern?",
    "options_en": ["Direct and strong", "Erratic and weak", "Hovering", "No flying"],
    "answer_en": "Direct and strong",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 34,
    "question_en": "What fruit does koel particularly like?",
    "options_en": ["Berries and figs", "Apples only", "Citrus fruits", "No fruits"],
    "answer_en": "Berries and figs",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 35,
    "question_en": "How does koel contribute to ecosystem?",
    "options_en": ["Insect population control", "Soil aeration", "Water purification", "Air cleaning"],
    "answer_en": "Insect population control",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 36,
    "question_en": "What is the Bengali name for koel?",
    "options_en": ["Kokil", "Pakhi", "Chiri", "Pakh"],
    "answer_en": "Kokil",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 37,
    "question_en": "What time announces spring's arrival?",
    "options_en": ["Koel's first call", "First rainfall", "Flower blooming", "Temperature rise"],
    "answer_en": "Koel's first call",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 38,
    "question_en": "What is unique about koel's voice?",
    "options_en": ["Melodious and far-carrying", "Harsh and grating", "Silent", "Very soft"],
    "answer_en": "Melodious and far-carrying",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 39,
    "question_en": "What cultural importance does koel have?",
    "options_en": ["Featured in poetry/music", "Hunted for food", "Considered pest", "No importance"],
    "answer_en": "Featured in poetry/music",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 40,
    "question_en": "How do host birds react to koel's eggs?",
    "options_en": ["Often accept them", "Always reject them", "Destroy them", "Ignore them"],
    "answer_en": "Often accept them",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 41,
    "question_en": "What is koel's conservation status?",
    "options_en": ["Least concern", "Endangered", "Critically endangered", "Extinct"],
    "answer_en": "Least concern",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 42,
    "question_en": "What is the nestling period?",
    "options_en": ["19-28 days", "5-7 days", "40-50 days", "3-4 months"],
    "answer_en": "19-28 days",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 43,
    "question_en": "What distinguishes male's call?",
    "options_en": ["Loud 'ku-oo'", "Soft chirp", "Harsh cry", "Musical warble"],
    "answer_en": "Loud 'ku-oo'",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 44,
    "question_en": "What is female's vocalization?",
    "options_en": ["Shrill 'kik-kik-kik'", "Same as male", "Silent", "Melodious song"],
    "answer_en": "Shrill 'kik-kik-kik'",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 45,
    "question_en": "What is the incubation period?",
    "options_en": ["12-14 days", "30 days", "5 days", "60 days"],
    "answer_en": "12-14 days",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 46,
    "question_en": "What predators threaten koel?",
    "options_en": ["Birds of prey", "No predators", "Snakes only", "Mammals only"],
    "answer_en": "Birds of prey",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 47,
    "question_en": "What is average lifespan?",
    "options_en": ["4-6 years", "1 year", "20 years", "50 years"],
    "answer_en": "4-6 years",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 48,
    "question_en": "What is the wingspan?",
    "options_en": ["40-46 cm", "20 cm", "100 cm", "150 cm"],
    "answer_en": "40-46 cm",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 49,
    "question_en": "What is the body length?",
    "options_en": ["39-46 cm", "15 cm", "70 cm", "100 cm"],
    "answer_en": "39-46 cm",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 50,
    "question_en": "What is the weight range?",
    "options_en": ["190-327 g", "50 g", "500 g", "1 kg"],
    "answer_en": "190-327 g",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 51,
    "question_en": "What distinguishes juvenile koel?",
    "options_en": ["Barred plumage", "Same as adult", "All white", "Bright colors"],
    "answer_en": "Barred plumage",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 52,
    "question_en": "What is the beak color?",
    "options_en": ["Pale green", "Black", "Red", "Yellow"],
    "answer_en": "Pale green",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 53,
    "question_en": "What is leg/foot color?",
    "options_en": ["Grey", "Red", "Yellow", "Black"],
    "answer_en": "Grey",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 54,
    "question_en": "What is primary host in India?",
    "options_en": ["House crow", "Sparrow", "Eagle", "Parrot"],
    "answer_en": "House crow",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 55,
    "question_en": "What is breeding months range?",
    "options_en": ["March to August", "October to December", "January only", "All year"],
    "answer_en": "March to August",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 56,
    "question_en": "What is clutch size?",
    "options_en": ["2-3 eggs", "1 egg", "5-6 eggs", "10 eggs"],
    "answer_en": "2-3 eggs",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 57,
    "question_en": "What is egg color?",
    "options_en": ["Greenish blue", "Pure white", "Brown spotted", "Pink"],
    "answer_en": "Greenish blue",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 58,
    "question_en": "What is egg size?",
    "options_en": ["34 x 24 mm", "50 x 35 mm", "20 x 15 mm", "10 x 10 mm"],
    "answer_en": "34 x 24 mm",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 59,
    "question_en": "What is fledging period?",
    "options_en": ["20-28 days", "5 days", "40 days", "60 days"],
    "answer_en": "20-28 days",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 60,
    "question_en": "What is brooding behavior?",
    "options_en": ["None (brood parasite)", "Intensive brooding", "Shared brooding", "Male only broods"],
    "answer_en": "None (brood parasite)",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 61,
    "question_en": "What is geographic range?",
    "options_en": ["India to Australia", "Europe only", "Africa only", "Americas only"],
    "answer_en": ["India to Australia"],
    "attempted": false,
    "selected": ""
  },
  {
    "num": 62,
    "question_en": "What subspecies in South Asia?",
    "options_en": ["Eudynamys scolopaceus scolopaceus", "Eudynamys scolopaceus malayanus", "Both", "Neither"],
    "answer_en": "Eudynamys scolopaceus scolopaceus",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 63,
    "question_en": "What is sexual dimorphism?",
    "options_en": ["Male black, female spotted", "Both same", "Female black", "No difference"],
    "answer_en": "Male black, female spotted",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 64,
    "question_en": "What is roosting behavior?",
    "options_en": ["Solitary rooster", "Large flocks", "Pair roosting", "No roosting"],
    "answer_en": "Solitary rooster",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 65,
    "question_en": "What is daily activity pattern?",
    "options_en": ["Diurnal", "Nocturnal", "Crepuscular", "All times"],
    "answer_en": "Diurnal",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 66,
    "question_en": "What is foraging method?",
    "options_en": ["Gleans from foliage", "Hunts on ground", "Catches in air", "Dives in water"],
    "answer_en": "Gleans from foliage",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 67,
    "question_en": "What is water requirement?",
    "options_en": ["Drinks regularly", "Gets from food", "No water needed", "Only rainwater"],
    "answer_en": "Drinks regularly",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 68,
    "question_en": "What is molting period?",
    "options_en": ["Post-breeding", "Pre-breeding", "Winter", "Continuous"],
    "answer_en": "Post-breeding",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 69,
    "question_en": "What is courtship display?",
    "options_en": ["Calling from perch", "Aerial displays", "Ground dancing", "No display"],
    "answer_en": "Calling from perch",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 70,
    "question_en": "What is territory size?",
    "options_en": ["Large territories", "Small territories", "No territories", "Colonial nesting"],
    "answer_en": "Large territories",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 71,
    "question_en": "What is population trend?",
    "options_en": ["Stable", "Decreasing", "Increasing", "Unknown"],
    "answer_en": "Stable",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 72,
    "question_en": "What is primary threat?",
    "options_en": ["Habitat loss", "Hunting", "Pollution", "Climate change"],
    "answer_en": "Habitat loss",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 73,
    "question_en": "What is legal protection status?",
    "options_en": ["Protected in India", "No protection", "Hunted legally", "Endangered species"],
    "answer_en": "Protected in India",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 74,
    "question_en": "What is cultural representation?",
    "options_en": ["Love and separation", "War and peace", "Wealth and poverty", "Life and death"],
    "answer_en": "Love and separation",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 75,
    "question_en": "What is literary appearance?",
    "options_en": ["Classical Sanskrit poetry", "Modern novels only", "Scientific texts only", "No appearances"],
    "answer_en": "Classical Sanskrit poetry",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 76,
    "question_en": "What is mythological association?",
    "options_en": ["Spring messenger", "Death omen", "Rain bringer", "Harvest symbol"],
    "answer_en": "Spring messenger",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 77,
    "question_en": "What is folk belief?",
    "options_en": ["First call brings spring", "Causes illness", "Brings wealth", "Predicts rain"],
    "answer_en": "First call brings spring",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 78,
    "question_en": "What is artistic depiction?",
    "options_en": ["Miniature paintings", "Modern abstract", "Sculpture only", "No depiction"],
    "answer_en": "Miniature paintings",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 79,
    "question_en": "What is musical reference?",
    "options_en": ["Classical ragas", "Rock music", "Jazz standards", "No references"],
    "answer_en": "Classical ragas",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 80,
    "question_en": "What is poetic meter reference?",
    "options_en": ["Kokil metre", "Sparrow metre", "Eagle metre", "No reference"],
    "answer_en": "Kokil metre",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 81,
    "question_en": "What is festival association?",
    "options_en": ["Spring festivals", "Winter festivals", "Monsoon festivals", "No association"],
    "answer_en": "Spring festivals",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 82,
    "question_en": "What is regional name variations?",
    "options_en": ["Koyal, Kokila, Koel", "Same everywhere", "No variations", "Only Koel"],
    "answer_en": "Koyal, Kokila, Koel",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 83,
    "question_en": "What is migration pattern?",
    "options_en": ["Altitudinal migrant", "Long-distance", "No migration", "Random movement"],
    "answer_en": "Altitudinal migrant",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 84,
    "question_en": "What is altitude range?",
    "options_en": ["Sea level to 1800m", "Only mountains", "Only plains", "Any altitude"],
    "answer_en": "Sea level to 1800m",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 85,
    "question_en": "What is climate preference?",
    "options_en": ["Tropical/subtropical", "Temperate", "Arctic", "Desert"],
    "answer_en": "Tropical/subtropical",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 86,
    "question_en": "What is nesting success rate?",
    "options_en": ["Moderate", "Very high", "Very low", "Unknown"],
    "answer_en": "Moderate",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 87,
    "question_en": "What is host detection rate?",
    "options_en": ["Sometimes detected", "Always detected", "Never detected", "Always accepted"],
    "answer_en": "Sometimes detected",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 88,
    "question_en": "What is chick survival strategy?",
    "options_en": ["Ejects host eggs", "Coexists", "Kills host chicks", "No strategy"],
    "answer_en": "Ejects host eggs",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 89,
    "question_en": "What is growth rate?",
    "options_en": ["Faster than host chicks", "Slower", "Same", "Variable"],
    "answer_en": "Faster than host chicks",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 90,
    "question_en": "What is fledgling care?",
    "options_en": ["Fed by host parents", "Self-feeding", "Koel parents feed", "No care"],
    "answer_en": "Fed by host parents",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 91,
    "question_en": "What is independence age?",
    "options_en": ["3-4 weeks after fledging", "Immediate", "6 months", "1 year"],
    "answer_en": "3-4 weeks after fledging",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 92,
    "question_en": "What is sexual maturity age?",
    "options_en": ["1 year", "2-3 years", "6 months", "5 years"],
    "answer_en": "1 year",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 93,
    "question_en": "What is breeding frequency?",
    "options_en": ["Once yearly", "Multiple broods", "Continuous", "Irregular"],
    "answer_en": "Once yearly",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 94,
    "question_en": "What is mate fidelity?",
    "options_en": ["Seasonal pairs", "Lifelong pairs", "Polygamous", "Promiscuous"],
    "answer_en": "Seasonal pairs",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 95,
    "question_en": "What is communication method?",
    "options_en": ["Vocal calls", "Visual displays", "Both", "Neither"],
    "answer_en": "Vocal calls",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 96,
    "question_en": "What is social structure?",
    "options_en": ["Solitary", "Pairs", "Small groups", "Large flocks"],
    "answer_en": "Solitary",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 97,
    "question_en": "What is interspecific competition?",
    "options_en": ["With other cuckoos", "With all birds", "No competition", "With mammals"],
    "answer_en": "With other cuckoos",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 98,
    "question_en": "What is human interaction?",
    "options_en": ["Generally tolerated", "Hunted", "Domesticated", "Feared"],
    "answer_en": "Generally tolerated",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 99,
    "question_en": "What is research significance?",
    "options_en": ["Brood parasitism studies", "Migration studies", "Vocalization research", "All of these"],
    "answer_en": "All of these",
    "attempted": false,
    "selected": ""
  },
  {
    "num": 100,
    "question_en": "What is the poem's focus about koel?",
    "options_en": ["Its melancholic call", "Physical appearance", "Flying ability", "Feeding habits"],
    "answer_en": "Its melancholic call",
    "attempted": false,
    "selected": ""
  }
];
// --------------------------- GLOBAL VARS -----------------------------
let currentQuestion = 0;
let language = "en";
let timeLeft = 60 * 60; 
let timerInterval;

// ----------------- Load Question -----------------
function loadQuestion(index) {
    const q = questions[index];
    if (!q) return; //  undefined error fix

    document.getElementById("question").textContent =
        `${q.num}. ${language === "en" ? q.question_en : q.question_hi}`;

    document.getElementById("questionCounter").textContent =
        `Question ${index + 1} of ${questions.length}`;

    const optionsElement = document.getElementById("options");
    optionsElement.innerHTML = "";

    const options = language === "en" ? q.options_en : q.options_hi;

    options.forEach(option => {
        const isSelected = q.selected === option;

        const div = document.createElement("div");
        div.className = "option-box";

        div.style = `
            border: 2px solid ${isSelected ? "#007bff" : "#ccc"};
            background-color: ${isSelected ? "#e7f1ff" : "white"};
            padding: 10px;
            border-radius: 8px;
            margin: 6px 0;
            cursor: pointer;
        `;

        div.innerHTML = `
            <input type="radio" name="option" value="${option}" 
            ${isSelected ? "checked" : ""} style="margin-right:8px;">
            ${option}
        `;

        div.addEventListener("click", () => {
            markAttempted(index, option);
            loadQuestion(index);
        });

        optionsElement.appendChild(div);
    });

    updateNavigation();
}

// ----------------- Attempt Mark -----------------
function markAttempted(index, selectedAnswer) {
    questions[index].attempted = true;
    questions[index].selected = selectedAnswer;
    updateNavigation();
}

// ----------------- Next / Previous -----------------
function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion(currentQuestion);
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion(currentQuestion);
    }
}

function changeLanguage() {
    language = document.getElementById("languageSelect").value;
    loadQuestion(currentQuestion);
}

// ----------------- Final Submit -----------------
function submitQuiz() {
    let confirmation = confirm("Are you sure you want to submit the test?");
    if (!confirmation) return;

    let attempted = 0;
    let notAttempted = 0;
    let score = 0;
    const results = [];

    questions.forEach(q => {
        if (q.attempted) {
            attempted++;

            if (q.selected === q.answer_en || q.selected === q.answer_hi) {
                score++;
            }
        } else {
            notAttempted++;
        }

        results.push({
            question: language === "en" ? q.question_en : q.question_hi,
            selected: q.selected || "Not Answered",
            correct: language === "en" ? q.answer_en : q.answer_hi
        });
    });

    localStorage.setItem("attempted", attempted);
    localStorage.setItem("notAttempted", notAttempted);
    localStorage.setItem("score", score);
    localStorage.setItem("results", JSON.stringify(results));

    let viewResult = confirm("Test submitted! Do you want to view result?");
    if (viewResult) {
        window.location.href = "/RTS/public/Deshbord/category/test/submit-test.html";
    }
}

// ----------------- Navigation Circles -----------------
function updateNavigation() {
    const nav = document.getElementById("circleContainer");
    nav.innerHTML = "";

    questions.forEach((q, i) => {
        let color = "gray";
        if (i === currentQuestion) color = "blue";
        else if (q.attempted) color = "green";

        nav.innerHTML += `
            <div class="circle" style="background:${color};"
            onclick="jumpToQuestion(${i})">${i + 1}</div>
        `;
    });
}

function jumpToQuestion(index) {
    currentQuestion = index;
    loadQuestion(index);
}

// ----------------- Timer -----------------
function startTimer() {
    const timerElement = document.getElementById("timer");

    timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert("Time's up!");
            submitQuiz();
        } else {
            const hours = String(Math.floor(timeLeft / 3600)).padStart(2, "0");
            const minutes = String(Math.floor((timeLeft % 3600) / 60)).padStart(2, "0");
            const seconds = String(timeLeft % 60).padStart(2, "0");

            timerElement.textContent = `Time Left: ${hours}:${minutes}:${seconds}`;
            timeLeft--;
        }
    }, 1000);
}

// ----------------- Camera & Movement Detection -----------------
let videoStream;
let movementCount = 0;

function startCamera() {
    const container = document.createElement("div");
    container.id = "camera-container";
    container.style = `
        position:fixed; top:10px; left:10px; width:130px; height:130px;
        border-radius:50%; overflow:hidden; border:3px solid red; z-index:9999;
    `;

    document.body.appendChild(container);

    const video = document.createElement("video");
    video.autoplay = true;
    video.playsinline = true;
    video.style = "width:100%; height:100%; object-fit:cover;";
    container.appendChild(video);

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            videoStream = stream;
            detectMovement(video);
        })
        .catch(() => alert("Camera access denied!"));
}

function detectMovement(video) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 160;
    canvas.height = 160;

    let lastData = null;

    setInterval(() => {
        ctx.drawImage(video, 0, 0, 160, 160);
        const data = ctx.getImageData(0, 0, 160, 160);

        if (lastData) {
            let diff = 0;
            for (let i = 0; i < data.data.length; i += 4) {
                diff += Math.abs(data.data[i] - lastData.data[i]);
            }

            if (diff > 1000000) {
                movementCount++;

                if (movementCount === 1) alert("⚠ Alert 1: No movement detected!");
                if (movementCount === 2) alert("⚠ Alert 2: Head not moving!");
                if (movementCount === 3) {
                    alert("⚠ Alert 3: Restarting test...");
                    restartTest();
                }
            }
        }
        lastData = data;

    }, 2000);
}

function restartTest() {
    if (videoStream) videoStream.getTracks().forEach(t => t.stop());

    const cam = document.getElementById("camera-container");
    if (cam) cam.remove();

    movementCount = 0;
    currentQuestion = 0;
    timeLeft = 60 * 60;

    questions.forEach(q => {
        q.attempted = false;
        q.selected = null;
    });

    loadQuestion(0);
    startTimer();
    startCamera();
}

// ----------------- Page Load -----------------
window.onload = function () {
    loadQuestion(currentQuestion);
    startTimer();
    startCamera();
};